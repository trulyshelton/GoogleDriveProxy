{"version":3,"sources":["index.js"],"names":["api","isMac","navigator","platform","toUpperCase","indexOf","folderMimeType","folderImg","useStyles","makeStyles","theme","appBar","backgroundColor","lightBlue","icon","marginRight","spacing","grow","flexGrow","conditionGrow","breakpoints","up","search","position","borderRadius","shape","fade","palette","common","white","marginLeft","width","searchIcon","height","pointerEvents","display","alignItems","justifyContent","inputRoot","color","inputInput","padding","transition","transitions","create","cardGrid","paddingTop","paddingBottom","card","flexDirection","cardMedia","cardContent","form","flexWrap","formControl","margin","minWidth","getOrderBy","JSON","parse","localStorage","getItem","viewed","id","recentViews","splice","unshift","setItem","stringify","getHistory","getReadableFileSizeString","fileSizeInBytes","i","Math","max","toFixed","getToken","cacheItems","App","classes","inputRef","React","createRef","iniHistory","useState","loggedIn","open","submitting","loginState","setLoginState","searchDisabled","setSearchDisabled","items","setItems","folders","setFolders","history","setHistory","favorites","setFavorites","orderby","setOrderby","view","setViewRaw","setView","obj","document","title","name","previous_state","URLSearchParams","length","set","hashEventResponder","e","params","window","location","hash","substr","queryParam","get","fileParam","newParams","item","oB","orderByQuery","key","order","toString","type","push","loadResource","value","force","accessModal","replaceState","opts","fetch","headers","Authorization","then","resp","json","res","files","filter","el","mimeType","postProcess","catch","alert","finally","scrollTo","searchTrigger","ev","preventDefault","current","dispatchEvent","Event","state","find","x","body","method","console","log","loginTrigger","username","password","login","status","token","afterLogin","err","useEffect","addEventListener","updateFavorite","isAdd","includes","a","errorMessage","handleMenuClose","orderBy","orderchangeEvent","handleModalClick","mimetype","target","parentNode","attributes","getNamedItem","tagName","anchorEl","setAnchorEl","tooltipCardMedia","size","onClick","once","offset","style","cursor","src","thumbnailLink","className","image","aria-controls","aria-haspopup","event","currentTarget","variant","keepMounted","Boolean","onClose","r","map","innerText","autoComplete","htmlFor","onChange","inputProps","removeItem","action","onSubmit","placeholder","root","input","disabled","pop","popHistory","maxWidth","container","concat","xs","sm","md","data-id","data-name","data-mimetype","top","right","fill","parseInt","placement","href","download","encodeURI","role","aria-label","delete","aria-labelledby","fullWidth","noWrap","controls","autoPlay","autoFocus","required","label","onKeyPress","autoCapitalize","autoCorrect","evt","left","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.758f2a57.chunk.js","sourcesContent":["import React, {useEffect} from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport {Menu as MenuIcon, Search, ArrowBack, NavigateNext, CloudDownload, FavoriteBorder, Favorite} from '@material-ui/icons';\nimport Menu from '@material-ui/core/Menu';\nimport Typography from \"@material-ui/core/Typography\";\nimport {makeStyles} from \"@material-ui/core\";\nimport {lightBlue} from \"@material-ui/core/colors\";\nimport {fade} from \"@material-ui/core/styles\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Button from \"@material-ui/core/Button\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Container from \"@material-ui/core/Container\";\nimport Card from \"@material-ui/core/Card\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport Select from \"@material-ui/core/Select\";\nimport Tooltip from \"@material-ui/core/Tooltip\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport TextField from \"@material-ui/core/TextField\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport { LazyLoadImage } from 'react-lazy-load-image-component';\n\nconst api = \"https://api.sheltonhuang.me/GoogleDriveProxy/\";\n\nconst isMac = navigator.platform.toUpperCase().indexOf('MAC')>=0;\nconst folderMimeType = 'application/vnd.google-apps.folder';\nconst folderImg = 'folderImg.jpg';\nconst failOverImg = 'imgNotFound.jpg';\n\nconst useStyles = makeStyles(theme => ({\n    appBar: {\n        backgroundColor: lightBlue[\"700\"],\n    },\n    icon: {\n        marginRight: theme.spacing(2),\n    },\n    grow: {\n        flexGrow: 1,\n    },\n    conditionGrow: {\n        [theme.breakpoints.up('sm')]: {\n            flexGrow: 1,\n        }\n    },\n    search: {\n        position: 'relative',\n        borderRadius: theme.shape.borderRadius,\n        backgroundColor: fade(theme.palette.common.white, 0.15),\n        '&:hover': {\n            backgroundColor: fade(theme.palette.common.white, 0.25),\n        },\n        marginRight: 0,\n        marginLeft: 0,\n        width: '100%',\n        [theme.breakpoints.up('sm')]: {\n            width: 600,\n        },\n    },\n    searchIcon: {\n        width: theme.spacing(7),\n        height: '100%',\n        position: 'absolute',\n        pointerEvents: 'none',\n        display: 'flex',\n        alignItems: 'center',\n        justifyContent: 'center',\n    },\n    inputRoot: {\n        color: 'inherit',\n        width: 'calc(100% - 50px)'\n    },\n    inputInput: {\n        padding: theme.spacing(1, 1, 1, 7),\n        transition: theme.transitions.create('width'),\n        width: '100%'\n    },\n    cardGrid: {\n        paddingTop: theme.spacing(8),\n        paddingBottom: theme.spacing(8),\n    },\n    card: {\n        height: '100%',\n        display: 'flex',\n        flexDirection: 'column',\n    },\n    cardMedia: {\n        paddingTop: '56.25%', // 16:9\n    },\n    cardContent: {\n        flexGrow: 1,\n    },\n    form: {\n        display: 'flex',\n        flexWrap: 'wrap'\n    },\n    formControl: {\n        margin: theme.spacing(1),\n        minWidth: 120,\n    }\n}));\n\nconst getOrderBy = () => JSON.parse(localStorage.getItem(\"orderBy\") || '{\"key\":\"createdTime\",\"order\":\" desc\"}');\nconst putOrderBy = (orderBy) => localStorage.setItem(\"orderBy\", JSON.stringify(orderBy));\n\nconst viewed = (id) => {\n    let recentViews = JSON.parse(localStorage.getItem(\"recentViews\") || \"[]\");\n    let position = recentViews.indexOf(id);\n    if (position > -1) recentViews.splice(position, 1);\n    recentViews.unshift(id);\n    recentViews.splice(100);\n    localStorage.setItem(\"recentViews\", JSON.stringify(recentViews));\n};\n\nconst getRecents = () => JSON.parse(localStorage.getItem(\"recentViews\") || \"[]\");\nconst addHistory = (item) => localStorage.setItem(\"history\", JSON.stringify([...getHistory(), item]));\nconst popHistory = () => {\n    let history = getHistory();\n    if (history.length < 1) return null;\n    let res = history.pop();\n    localStorage.setItem(\"history\", JSON.stringify(history));\n    return res;\n};\nconst getHistory = () => JSON.parse(localStorage.getItem(\"history\") || \"[\\\"folder/root\\\"]\");\n\nfunction getReadableFileSizeString(fileSizeInBytes) {\n    let i = -1, byteUnits = [' kB', ' MB', ' GB', ' TB', 'PB', 'EB', 'ZB', 'YB'];\n    do { fileSizeInBytes = fileSizeInBytes / 1024; i++; } while (fileSizeInBytes > 1024);\n    return Math.max(fileSizeInBytes, 0.1).toFixed(1) + byteUnits[i];\n}\n\nconst getToken = ()=> localStorage.getItem(\"token\");\nlet cacheItems = [];\n\nfunction App() {\n    const classes = useStyles();\n    const inputRef = React.createRef();\n    const iniHistory = getHistory();\n\n    const [loginState, setLoginState]  = React.useState({loggedIn: !!getToken(), open: false, submitting: false});\n    const [searchDisabled, setSearchDisabled] = React.useState(!getToken());\n    const [items, setItems] = React.useState([]);\n    const [folders, setFolders] = React.useState([]);\n    const [history, setHistory] = React.useState(iniHistory);\n    const [favorites, setFavorites] = React.useState([]);\n    const [orderby, setOrderby] = React.useState(getOrderBy());\n    const [view, setViewRaw] = React.useState({open: false});\n    const setView = (obj) => {\n        document.title = obj.open ? obj.name : \"GoogleDriveProxy\";\n        setViewRaw(obj);\n    };\n\n    let previous_state =  new URLSearchParams();\n    if (iniHistory.length > 1) previous_state.set('q', iniHistory[iniHistory.length-1]);\n\n    const hashEventResponder = (e) => {\n        const params = new URLSearchParams(window.location.hash.substr(1));\n        const queryParam = params.get('q'), fileParam = params.get('f');\n        const newParams = new URLSearchParams();\n        newParams.set('q', queryParam ? queryParam : 'folder/root');\n        if (fileParam) newParams.set('f', fileParam);\n\n        let oB = getOrderBy();\n        let orderByQuery = new URLSearchParams({\"orderBy\":oB.key + oB.order}).toString();\n        if (previous_state.get('q') !== newParams.get('q')) {\n            if (e && e.type !== 'rewind') {\n                history.push(previous_state.get('q'));\n                addHistory(previous_state.get('q'));\n            }\n\n            loadResource({value: newParams.get('q') + \"?\" + orderByQuery});\n        } else if (e && e.force) {\n            loadResource({value: newParams.get('q') + \"?\" + orderByQuery});\n        }\n\n        if (fileParam) {\n            accessModal({open: true, id: fileParam});\n        } else {\n            setView({open: false});\n        }\n        window.history.replaceState({}, '', '#' + newParams.toString());\n        previous_state = newParams;\n    };\n\n    const rewind = () => {\n        let params = new URLSearchParams(window.location.hash.substr(1));\n        params.set('q', history.pop());\n        popHistory();\n        window.history.replaceState({}, '', '#' + params.toString());\n        window.dispatchEvent(new Event(\"rewind\"));\n    };\n\n    const loadResource = (opts) => {\n        setSearchDisabled(true);\n\n        return fetch(`${api}${opts.value}`,  {headers: {Authorization: getToken(), 'Content-Type': 'application/json'}, ...(opts.opts ? opts.opts : {})})\n            .then(resp => resp.json())\n            .then((res) => {\n                setItems(cacheItems = res.files.filter(el => el.mimeType !== folderMimeType));\n                setFolders(res.files.filter(el => el.mimeType === folderMimeType));\n                return res;\n            })\n            .then((res) => opts.postProcess ? opts.postProcess(res) : null)\n            .catch(alert)\n            .finally(() => {\n                window.scrollTo(0, 0);\n                setSearchDisabled(false);\n            });\n    };\n\n    const searchTrigger = (ev) => {\n        ev && ev.preventDefault && ev.preventDefault();\n        let params = new URLSearchParams(window.location.hash.substr(1));\n        params.set('q', inputRef.current.value ? `query/${inputRef.current.value}` : 'folder/root');\n        window.history.replaceState({}, '', '#' + params.toString());\n        window.dispatchEvent(new Event(\"myhashchange\"));\n    };\n\n\n    const accessModal = (state) => {\n        if (state.name) {\n            setView(state);\n        } else {\n            let item = cacheItems.find(x => x.id === state.id);\n            if (item) {\n                setView({...state, name: item.name});\n                viewed(state.id);\n            } else {\n                fetch(`${api}file`, {\n                        body: JSON.stringify({files: [state.id]}),\n                        method: 'POST',\n                        headers: {'Authorization': getToken(), 'Content-Type': 'application/json'}\n                    })\n                    .then(resp => resp.json())\n                    .then(res => {\n                        if (res.files.length === 1) {\n                            setView({...state, name: res.files[0].name});\n                            viewed(state.id);\n                        }\n                    })\n                    .catch(console.log);\n            }\n        }\n    };\n\n    const loginTrigger = (ev) => {\n        if (ev.key === 'Enter' && loginState.username && loginState.password) login();\n    };\n\n    const login = () => {\n        setLoginState({...loginState, submitting: true});\n        fetch(`${api}auth`, {\n            body: JSON.stringify({username: loginState.username, password: loginState.password}),\n            method: 'POST',\n            headers: {'Content-Type': 'application/json'}\n        })\n            .then(resp => {\n                if (resp.status === 401) {\n                    alert(\"Incorrect username or password.\");\n                    throw resp;\n                } else if (resp.status === 200) {\n                    return resp.json();\n                } else {\n                    alert(\"Unknown response \" + resp.status + \" from server.\");\n                    throw resp;\n                }\n            })\n            .then(resp => {\n                localStorage.setItem('token', resp.token);\n                afterLogin();\n                setLoginState({loggedIn: true, open: false, submitting: false});\n            })\n            .catch(err => {\n                console.log(err);\n                setLoginState({...loginState, submitting: false});\n            })\n    };\n\n    const specialLogin = () => {\n        localStorage.setItem('token', loginState.password);\n        setLoginState({loggedIn: true, open: false, submitting: false});\n        afterLogin()\n    };\n\n    const logout = () => {\n        inputRef.current.value = \"\";\n        setLoginState({loggedIn: false, open: false, submitting: false});\n        setItems([]); setFolders([]); setFavorites([]); setHistory([]); setSearchDisabled(true);\n        localStorage.removeItem('token');\n        localStorage.removeItem('history');\n        handleMenuClose();\n    };\n\n    const afterLogin = () => {\n        hashEventResponder();\n        fetch(`${api}favorite`, {headers: {Authorization: getToken()}})\n            .then(resp => resp.json())\n            .then((res) => setFavorites(res.files))\n            .catch(alert);\n    };\n\n    useEffect(() => {\n        window.addEventListener(\"hashchange\", hashEventResponder, false);\n        window.addEventListener(\"myhashchange\", hashEventResponder, false);\n        window.addEventListener(\"rewind\", hashEventResponder, false);\n       if (getToken()) afterLogin();\n    // eslint-disable-next-line\n    }, []);\n\n\n    //modal\n\n    const updateFavorite = (id) => {\n        let isAdd = !favorites.includes(id);\n        fetch(`${api}favorite/${id}`, {headers: {Authorization: getToken()}, method: isAdd ? 'PUT' : 'DELETE'})\n            .then(async resp => {\n                if (resp.status === 204)  {\n                    if (isAdd) {\n                        if (!favorites.includes(id)) {\n                            setFavorites([id, ...favorites])\n                        }\n                    } else {\n                        setFavorites(favorites.filter(x => x !== id));\n                    }\n                } else if (resp.status === 507) {\n                    throw (await resp.json()).errorMessage;\n                } else {\n                    throw resp.json();\n                }\n            })\n            .catch(alert)\n            .finally(handleMenuClose);\n    };\n\n    const fetchRecent = () => {\n        let recentViews = getRecents();\n        if (recentViews.length) {\n            loadResource({\n                value: \"file\",\n                opts: {\n                    body: JSON.stringify({files: recentViews}),\n                    method: 'POST',\n                }}).then(handleMenuClose)\n        }\n    };\n\n    const changeReverse = (e) => {\n        if (e.target.innerText && e.target.innerText.includes('Order By')) {\n            setOrderby({...orderby, order: orderby.order.length ? \"\" : \" desc\"});\n        }\n    };\n\n    useEffect(() => {\n        putOrderBy(orderby);\n        let orderchangeEvent = new Event(\"myhashchange\");\n        orderchangeEvent.force = true;\n        window.dispatchEvent(orderchangeEvent);\n    }, [orderby]);\n\n    const handleModalClick = (e) => {\n        let el = e.target, id, name, mimetype;\n        do {\n            el = el.parentNode;\n            id = el.attributes.getNamedItem('data-id') ? el.attributes.getNamedItem('data-id').value : null;\n            name = el.attributes.getNamedItem('data-name') ? el.attributes.getNamedItem('data-name').value : null;\n            mimetype = el.attributes.getNamedItem('data-mimetype') ? el.attributes.getNamedItem('data-mimetype').value : null;\n        } while (el.parentNode && !(id && name && mimetype));\n\n        if (e.target.tagName === 'svg' || e.target.tagName === 'path') {  // is favorite click\n            updateFavorite(id);\n        } else {\n            let params = new URLSearchParams(window.location.hash.substr(1));\n            if (mimetype === folderMimeType) {\n                params.set('q', `folder/${id}`);\n                window.history.replaceState({}, '', '#' + params.toString());\n                window.dispatchEvent(new Event(\"myhashchange\"));\n            } else {\n                params.set('f', id);\n                window.history.replaceState({}, '', '#' + params.toString());\n                window.dispatchEvent(new Event(\"myhashchange\"));\n            }\n        }\n    };\n\n    const handleModalClose = () => {\n        let params = new URLSearchParams(window.location.hash.substr(1));\n        params.delete('f');\n        window.history.replaceState({}, '', '#' + params.toString());\n        window.dispatchEvent(new Event(\"myhashchange\"));\n    };\n\n\n    //menu\n    const [anchorEl, setAnchorEl] = React.useState(null);\n\n    const handleMenuClick = (event) => setAnchorEl(event.currentTarget);\n\n    const handleMenuClose = () => setAnchorEl(null);\n\n\n    function tooltipCardMedia(card) {\n        let size = card.size;\n        if (size) {\n            return (<LazyLoadImage onClick={handleModalClick} once offset={600} style={{cursor: 'pointer'}}\n                   src={card.mimeType === folderMimeType ? folderImg : (card.thumbnailLink || failOverImg)} />)\n        } else {\n            return <CardMedia className={classes.cardMedia} title={card.name} onClick={handleModalClick} image={folderImg} />;\n        }\n    }\n\n\n    return (\n        <>\n            <CssBaseline />\n                <AppBar position=\"sticky\" className={classes.appBar}>\n                    <Toolbar>\n                        {loginState.loggedIn ?\n                            (<IconButton color=\"inherit\" aria-controls=\"simple-menu\" aria-haspopup=\"true\" onClick={handleMenuClick}><MenuIcon/></IconButton>) :\n                            ( <Button  variant=\"contained\"  onClick={() => setLoginState({...loginState, open: true})} >Login</Button>)\n                        }\n                        <Menu\n                            id=\"simple-menu\" keepMounted\n                            anchorEl={anchorEl}\n                            open={Boolean(anchorEl)}\n                            onClose={handleMenuClose}\n                        >\n                            <MenuItem onClick={() => {\n                                window.history.replaceState({}, '', '#');\n                                window.dispatchEvent(new Event(\"myhashchange\"));\n                            }} >Home</MenuItem>\n                            <MenuItem onClick={() => loadResource({\n                                value: \"favorite?alt=content\",\n                                postProcess: (r) => setFavorites(r.files.map(x => x.id)) })} >Favorites</MenuItem>\n                            <MenuItem onClick={changeReverse}>\n                                <form className={classes.form} autoComplete=\"off\">\n                                    <FormControl className={classes.formControl}>\n                                        <InputLabel htmlFor=\"orderby\">Order By{orderby.order.length ? ' ⬇️':' ⬆️'}</InputLabel>\n                                        <Select\n                                            value={orderby.key}\n                                            onChange={(event) => setOrderby({...orderby, key: event.target.value})}\n                                            inputProps={{ name: 'Order By', id: 'orderby', }}\n                                        >\n                                            <MenuItem value={'createdTime'}>Create Time</MenuItem>\n                                            <MenuItem value={'name'}>Name</MenuItem>\n                                            <MenuItem value={'quotaBytesUsed'}>Size</MenuItem>\n                                        </Select>\n                                    </FormControl>\n                                </form>\n                            </MenuItem>\n                            <MenuItem onClick={fetchRecent} >Recently Viewed</MenuItem>\n                            <MenuItem onClick={logout} >Logout</MenuItem>\n                        </Menu>\n\n                        <div className={classes.grow} />\n                        <div className={classes.search}>\n                            <div className={classes.searchIcon}>\n                                <Search />\n                            </div>\n                            <form action=\".\" onSubmit={searchTrigger}>\n                                <InputBase\n                                    placeholder=\"Search…\"\n                                    classes={{\n                                        root: classes.inputRoot,\n                                        input: classes.inputInput,\n                                    }}\n                                    inputProps={{ 'aria-label': 'Search keywords' }}\n                                    inputRef={inputRef}\n                                    disabled={searchDisabled}\n                                    type='search'\n                                />\n                                <IconButton disabled={searchDisabled} onClick={searchTrigger} color='inherit'><NavigateNext/></IconButton>\n                            </form>\n                        </div>\n                        <div className={classes.grow} />\n                        <IconButton color=\"inherit\" disabled={history.length < 1} onClick={rewind}><ArrowBack/></IconButton>\n                    </Toolbar>\n                    {searchDisabled && loginState.loggedIn && <LinearProgress variant=\"query\" />}\n                </AppBar>\n            <main>\n                <Container className={classes.cardGrid} maxWidth=\"lg\" >\n                    <Grid container spacing={4}>\n                        {folders.concat(items).map(card => (\n                            <Grid item key={card['id']} xs={12} sm={6} md={3}  >\n                                <Card className={classes.card} data-id={card.id} data-name={card.name} data-mimetype={card.mimeType} style={{position: 'relative'}}>\n                                    {tooltipCardMedia(card)}\n                                    {card.mimeType !== folderMimeType &&\n                                    <IconButton size=\"small\" color=\"primary\" onClick={handleModalClick} style={{ position: 'absolute', top: '17px', right: '20px' }}>\n                                        {favorites.includes(card.id) ? <Favorite style={{fill: '#ea062c'}}/> : <FavoriteBorder style={{fill: '#ea062c'}}/>}\n                                    </IconButton>}\n                                    <CardContent className={classes.cardContent}>\n                                        <Typography variant=\"subtitle2\">{card.name}</Typography>\n                                    </CardContent>\n                                    <CardActions>\n                                        <Button size=\"small\" color=\"primary\" onClick={handleModalClick}>\n                                            View\n                                        </Button>\n                                        {card.mimeType !== folderMimeType &&\n                                        (<Tooltip title={getReadableFileSizeString(parseInt(card.size))} placement=\"top\">\n                                            <Button size=\"small\" color=\"primary\" href={`${api}file/${card.id}`} download={card.name} target=\"_blank\">\n                                            Download\n                                            </Button>\n                                        </Tooltip>)}\n                                        {card.mimeType !== folderMimeType && isMac &&\n                                        <Button size=\"small\" color=\"primary\" href={`iina://open?url=${encodeURI(api+'file/'+card.id)}`}>\n                                            <span role=\"img\" aria-label=\"play in iina\">▶️IINA</span>\n                                        </Button>}\n                                    </CardActions>\n                                </Card>\n                            </Grid>\n                        ))}\n                    </Grid>\n                </Container>\n            </main>\n            <Dialog open={view.open} onClose={handleModalClose} aria-labelledby=\"view screen\" fullWidth maxWidth=\"lg\">\n                {view.open &&\n                <Toolbar>\n                    <Typography noWrap={true} variant=\"h6\" className={classes.title}>\n                        {view.name}\n                    </Typography>\n                    <div className={classes.grow} />\n                    <IconButton size=\"small\" color=\"primary\" onClick={() => updateFavorite(view.id)} style={{marginRight: '4px'}} >\n                        {favorites.includes(view.id) ? <Favorite style={{fill: '#ea062c'}}/> : <FavoriteBorder style={{fill: '#ea062c'}}/>}\n                    </IconButton>\n                    <IconButton size=\"small\" color=\"primary\" href={`${api}file/${view.id}`} download={view.name} target=\"_blank\">\n                        <CloudDownload/>\n                    </IconButton>\n                </Toolbar>\n                }\n                {view.open && <video src={`${api}file/${view.id}`} controls={true} autoPlay />}\n            </Dialog>\n            <Dialog open={loginState.open} onClose={() => setLoginState({...loginState, open: false})} aria-labelledby=\"login window\" fullWidth maxWidth=\"xs\">\n                <DialogTitle>Login to GoogleDriveProxy</DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        To use this app, please enter your credential here.\n                    </DialogContentText>\n                    <form autoComplete=\"off\" action=\".\">\n                        <TextField autoFocus required fullWidth margin=\"normal\"\n                             type=\"text\" label=\"Username\" disabled={loginState.submitting} onKeyPress={loginTrigger} inputProps={{ autoCapitalize: 'off', autoCorrect: 'off' }}\n                                   onChange={(evt) => setLoginState({...loginState, username: evt.target.value})}\n                        />\n                        <TextField required fullWidth margin=\"normal\"\n                             type=\"password\" label=\"Password\" disabled={loginState.submitting} onKeyPress={loginTrigger}\n                                   onChange={(evt) => setLoginState({...loginState, password: evt.target.value})}\n                        />\n                    </form>\n                </DialogContent>\n                <DialogActions>\n                    <Button style={{position: 'absolute', left: \"10px\"}} onClick={specialLogin} disabled={!loginState.password}/>\n                    <Button disabled={!loginState.username || !loginState.password || loginState.submitting} onClick={login} color=\"primary\">Submit</Button>\n                </DialogActions>\n            </Dialog>\n        </>\n    );\n}\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}